# China-market Skills 待修复问题优先级列表

更新时间：2026-02-18  
P0问题修复状态：✅ 已完成（1/1）  
P1问题修复状态：✅ 3/4 已完成

---

## P0 - 立即修复（影响功能）

### ✅ 已修复

1. **disclosure-notice-monitor** - notice_daily_dashboard数据字段问题
   - 状态：✅ 已修复（2026-02-16）
   - 问题：stock_notice_report无数据时抛出KeyError
   - 解决：添加特殊处理，返回空结果
   - 提交：commit 7be94f9

---

## P1 - 高优先级（1-2周内修复，影响准确性）

### 数据源稳定性问题（约10个skills受影响）

1. **✅ AKShare接口健康检查机制**
   - 状态：✅ 已完成（2026-02-16）
   - 影响：所有56个skills
   - 问题：AKShare接口不稳定，无健康检查和自动重试
   - 解决：实现完整的健康检查、错误统计、自动降级机制
   - 提交：commit 9c19da3
   - 文档：view-service/AKSHARE_HEALTH_CHECK.md
   - 功能：
     - 定期健康检查（默认5分钟）
     - 错误统计和分类
     - 自动降级（连续失败5次触发）
     - 增强重试机制
     - CLI工具（check/stats/summary/reset）

2. **❌ 备用数据源配置（已取消）**
   - 状态：❌ 已取消（2026-02-17）
   - 影响：高频使用的核心skills（约10个）
   - 问题：过度依赖AKShare单一数据源
   - 决策：P1-1（健康检查机制）已经在一定程度上缓解了数据源不稳定问题，暂不实施备用数据源
   - 备注：如果未来AKShare稳定性问题严重，可以重新考虑

### 阈值验证问题（约15个skills需要验证）

3. **✅ 核心阈值历史回测验证**
   - 状态：✅ 已完成（2026-02-18）
   - 影响：5个核心skills的20条规则
   - 问题：大部分阈值是"初步估计"，缺少历史验证
   - 解决：完成5个核心skills的阈值回测验证，更新所有置信度
   - 提交：commit ba058f7
   - 文档：
     - docs/P1问题3-阈值回测完成总结.md
     - docs/P1问题3-5个Skills阈值回测汇总报告.md
     - backtest_results/*/backtest_report.md（5个详细报告）
   - 成果：
     - 完成5个skills：block-deal-monitor、concept-board-analyzer、equity-pledge-risk-monitor、fund-flow-monitor、limit-up-pool-analyzer
     - 更新20条规则的置信度（平均+0.024）
     - 平均胜率62%，平均夏普比率0.84
     - 识别Top 5最优规则
   - 后续：可以扩展到其他10个skills

### 文档完善问题（约5个skills文档过于简化）

4. **✅ 简化文档补充具体规则**
   - 状态：✅ 已完成（2026-02-17）
   - 影响：5个skills的methodology文档
   - 问题：部分文档过于简化，缺少具体规则和阈值
   - 解决：补充完整的规则、阈值、示例
   - 提交：commit 9bee926, d05d6c8
   - 文档：docs/P1问题4-文档补充完成总结.md
   - 已补充的skills：
     - block-deal-monitor（质量评分：98分）
     - bse-selection-analyzer（质量评分：97分）
     - equity-research-orchestrator（质量评分：100分，已达标）
     - portfolio-monitor-orchestrator（质量评分：95分）
     - weekly-market-brief-generator（质量评分：95分）
   - 平均质量评分：97分（超过92%目标）

---

## P2 - 中优先级（1个月内修复，影响体验）

### 性能优化问题（约20个skills需要优化）

5. **全市场分析性能优化**
   - 影响：需要分析全市场5000+股票的skills
   - 问题：计算量大，响应慢（>10秒）
   - 建议：添加缓存、增量计算、并行处理
   - 优先级：P2（中）
   - 推荐优先优化的skills：
     - quant-factor-screener（因子筛选）
     - factor-crowding-monitor（因子拥挤度）
     - market-breadth-monitor（市场广度）
     - small-cap-growth-identifier（小盘成长）
     - undervalued-stock-screener（低估值筛选）

6. **实时监控数据更新优化**
   - 影响：需要实时监控的skills（约10个）
   - 问题：数据更新频繁，资源占用高
   - 建议：使用WebSocket、增量更新、智能刷新
   - 优先级：P2（中）
   - 推荐优先优化的skills：
     - intraday-microstructure-analyzer
     - hot-rank-sentiment-monitor
     - limit-up-pool-analyzer
     - event-driven-detector

### 降级策略问题（所有56个skills）

7. **完整降级策略添加**
   - 影响：所有56个skills
   - 问题：大部分skills缺少完整的降级策略
   - 建议：为每个skill添加数据缺失、接口失败的降级方案
   - 优先级：P2（中）
   - 推荐分批添加：
     - 第一批：核心10个skills（高频使用）
     - 第二批：中频20个skills
     - 第三批：低频26个skills

### 边界条件处理问题（约30个skills需要统一）

8. **涨跌停数据处理统一**
   - 影响：约30个需要价格数据的skills
   - 问题：涨跌停时数据失真，处理方式不统一
   - 建议：统一涨跌停标识、数据过滤、影响说明
   - 优先级：P2（中低）

9. **停牌数据处理统一**
   - 影响：约30个需要交易数据的skills
   - 问题：停牌时数据缺失，处理方式不统一
   - 建议：统一停牌标识、数据填充、影响说明
   - 优先级：P2（中低）

10. **数据缺失处理统一**
    - 影响：所有56个skills
    - 问题：数据缺失时处理方式不统一
    - 建议：统一缺失值处理、降级策略、用户提示
    - 优先级：P2（中低）

---

## P3 - 低优先级（持续改进，影响体验）

### 用户体验优化（所有56个skills）

11. **输出格式优化**
    - 影响：所有56个skills
    - 问题：部分输出格式不够友好
    - 建议：统一输出格式、添加可视化、改进排序
    - 优先级：P3（低）

12. **错误提示优化**
    - 影响：所有56个skills
    - 问题：错误提示不够清晰
    - 建议：添加详细错误信息、建议操作、FAQ链接
    - 优先级：P3（低）

### 文档完善（所有56个skills）

13. **示例和FAQ添加**
    - 影响：所有56个skills
    - 问题：缺少实际使用示例和常见问题解答
    - 建议：为每个skill添加3-5个典型使用示例和FAQ
    - 优先级：P3（低）

14. **可视化输出添加**
    - 影响：适合可视化的skills（约20个）
    - 问题：纯文本输出不够直观
    - 建议：添加图表、热力图、趋势图等可视化
    - 优先级：P3（低）

### 测试覆盖（所有56个skills）

15. **单元测试添加**
    - 影响：所有56个skills
    - 问题：缺少单元测试
    - 建议：为核心逻辑添加单元测试
    - 优先级：P3（低）

16. **集成测试添加**
    - 影响：所有56个skills
    - 问题：缺少集成测试
    - 建议：添加端到端集成测试
    - 优先级：P3（低）

---

## 特殊问题（需要进一步调研）

### 数据质量问题

17. **行业分类不统一**
    - 影响：使用行业分类的skills（约15个）
    - 问题：不同数据源行业分类标准不同
    - 建议：建立统一的行业分类映射表
    - 优先级：待定（需要调研）

18. **财务数据质量评估**
    - 影响：使用财务数据的skills（约10个）
    - 问题：A股财报粉饰现象较多
    - 建议：添加财务数据质量评分机制
    - 优先级：待定（需要调研）

### A股特性问题

19. **T+1交易影响量化**
    - 影响：所有涉及交易的skills
    - 问题：T+1限制对策略的影响未量化
    - 建议：添加T+1影响的量化分析
    - 优先级：待定（需要调研）

20. **涨跌停影响量化**
    - 影响：所有涉及价格的skills
    - 问题：涨跌停对分析的影响未量化
    - 建议：添加涨跌停影响的量化分析
    - 优先级：待定（需要调研）

---

## 修复计划时间表

### 第1周（2026-02-17 - 2026-02-23）✅
- ✅ P0问题：disclosure-notice-monitor（已完成）
- ✅ P1问题1：AKShare健康检查机制（已完成）
- ❌ P1问题2：备用数据源（已取消）
- ✅ P1问题3：核心阈值回测验证（已完成）
- ✅ P1问题4：简化文档补充（已完成）

### 第2周（2026-02-24 - 2026-03-02）
- P2问题5：优化5个全市场分析skills的性能
- P2问题6：优化4个实时监控skills的数据更新

### 第3-4周（2026-03-03 - 2026-03-16）
- P2问题7：为所有skills添加降级策略（第一批：核心10个skills）

### 第5-8周（2026-03-17 - 2026-04-13）
- P2问题7：为所有skills添加降级策略（第二批、第三批）
- P2问题8-10：统一边界条件处理

### 持续改进（2026-04-14 开始）
- P3问题：用户体验优化、文档完善、测试覆盖
- 特殊问题：根据调研结果决定是否修复

---

## 总结

- **P0问题**：1个，已全部修复 ✅
- **P1问题**：4个，已完成3个 ✅✅✅，取消1个 ❌
- **P2问题**：6个，预计1个月内完成
- **P3问题**：6个，持续改进
- **特殊问题**：4个，需要进一步调研

**当前优先级**：P2问题5（全市场分析性能优化）

**P1问题完成情况**：
- ✅ P1-1：AKShare健康检查机制（2026-02-16完成）
- ❌ P1-2：备用数据源配置（已取消）
- ✅ P1-3：核心阈值历史回测验证（2026-02-18完成）
- ✅ P1-4：简化文档补充（2026-02-17完成）

